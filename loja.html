<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Loja - Camadas da Conexão</title>
    <link rel="icon" type="image/svg+xml" href="favicon.svg">
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/loja.css">
    <link href="https://fonts.googleapis.com/css2?family=Kdam+Thmor+Pro&display=swap" rel="stylesheet">
</head>

<body>
    <section id="loja" class="screen-section">
        <header class="header">
            <div class="header-left">
                <div class="back-button">
                    <a href="index.html" class="back-link" id="voltar-menu-btn">
                        <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 40 40" fill="none">
                            <path d="M25 10L15 20L25 30" stroke="#E1EA2D" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                        Voltar
                    </a>
                </div>
            </div>
            <div class="header-center">
                <h1 class="header-title">Loja de Equipamentos</h1>
                <p class="header-subtitle">Melhore suas habilidades digitais</p>
            </div>
            <div class="header-info">
                <svg xmlns="http://www.w3.org/2000/svg" width="65" height="61" viewBox="0 0 65 61" fill="none">
                    <path
                        d="M32.5 0L40.0212 23.1479H64.3604L44.6696 37.4541L52.1908 60.6021L32.5 46.2959L12.8092 60.6021L20.3304 37.4541L0.639606 23.1479H24.9788L32.5 0Z"
                        fill="#E1EA2D" />
                </svg>
                <p id="pontos-display">2450 Pontos</p>
            </div>
        </header>

        <main>
            <!-- Filtros da Loja -->
            <section class="shop-filters">
                <div class="filter-container">
                    <button class="filter-btn active" data-category="todos">Todos</button>
                    <button class="filter-btn" data-category="velocidade">Velocidade</button>
                    <button class="filter-btn" data-category="precisao">Precisão</button>
                    <button class="filter-btn" data-category="bonus">Bônus</button>
                    <button class="filter-btn" data-category="especiais">Especiais</button>
                </div>
            </section>

            <!-- Grid de Itens da Loja -->
            <section class="shop-items">
                <div class="shop-grid">
                    <!-- Item 1: Processador Turbo -->
                    <article class="shop-item" data-category="velocidade" data-price="300" data-id="processador-turbo">
                        <div class="item-icon">
                            <svg width="60" height="60" viewBox="0 0 60 60" fill="none">
                                <rect x="10" y="10" width="40" height="40" rx="4" fill="#0DF" opacity="0.8"/>
                                <rect x="15" y="15" width="30" height="30" rx="2" fill="#E1EA2D"/>
                                <circle cx="30" cy="30" r="8" fill="#0DF"/>
                            </svg>
                        </div>
                        <div class="item-info">
                            <h3 class="item-name">Processador Turbo</h3>
                            <p class="item-description">Reduz o tempo das fases em 20%</p>
                            <div class="item-effects">
                                <span class="effect-tag speed">-20% Tempo</span>
                            </div>
                            <div class="item-footer">
                                <span class="item-price">300 Pontos</span>
                                <button class="buy-btn" data-item="processador-turbo">Comprar</button>
                            </div>
                        </div>
                    </article>

                    <!-- Item 2: Memória RAM Plus -->
                    <article class="shop-item" data-category="precisao" data-price="450" data-id="memoria-ram">
                        <div class="item-icon">
                            <svg width="60" height="60" viewBox="0 0 60 60" fill="none">
                                <rect x="5" y="15" width="50" height="30" rx="3" fill="#0DF" opacity="0.8"/>
                                <rect x="10" y="20" width="40" height="20" rx="2" fill="#E1EA2D"/>
                                <rect x="15" y="25" width="6" height="10" fill="#0DF"/>
                                <rect x="25" y="25" width="6" height="10" fill="#0DF"/>
                                <rect x="35" y="25" width="6" height="10" fill="#0DF"/>
                            </svg>
                        </div>
                        <div class="item-info">
                            <h3 class="item-name">Memória RAM Plus</h3>
                            <p class="item-description">Aumenta a precisão das respostas em 15%</p>
                            <div class="item-effects">
                                <span class="effect-tag precision">+15% Precisão</span>
                            </div>
                            <div class="item-footer">
                                <span class="item-price">450 Pontos</span>
                                <button class="buy-btn" data-item="memoria-ram">Comprar</button>
                            </div>
                        </div>
                    </article>

                    <!-- Item 3: Placa de Rede Gold -->
                    <article class="shop-item" data-category="bonus" data-price="600" data-id="placa-rede">
                        <div class="item-icon">
                            <svg width="60" height="60" viewBox="0 0 60 60" fill="none">
                                <rect x="10" y="20" width="40" height="20" rx="3" fill="#E1EA2D" opacity="0.9"/>
                                <circle cx="20" cy="30" r="4" fill="#0DF"/>
                                <circle cx="30" cy="30" r="4" fill="#0DF"/>
                                <circle cx="40" cy="30" r="4" fill="#0DF"/>
                                <path d="M15 10 L45 10 L50 20 L10 20 Z" fill="#FFD700"/>
                            </svg>
                        </div>
                        <div class="item-info">
                            <h3 class="item-name">Placa de Rede Gold</h3>
                            <p class="item-description">Dobra os pontos ganhos por fase</p>
                            <div class="item-effects">
                                <span class="effect-tag bonus">2x Pontos</span>
                            </div>
                            <div class="item-footer">
                                <span class="item-price">600 Pontos</span>
                                <button class="buy-btn" data-item="placa-rede">Comprar</button>
                            </div>
                        </div>
                    </article>

                    <!-- Item 4: Firewall Pro -->
                    <article class="shop-item" data-category="precisao" data-price="400" data-id="firewall-pro">
                        <div class="item-icon">
                            <svg width="60" height="60" viewBox="0 0 60 60" fill="none">
                                <path d="M30 5 L50 15 L50 35 C50 45 30 55 30 55 C30 55 10 45 10 35 L10 15 Z" fill="#0DF" opacity="0.8"/>
                                <path d="M30 10 L45 18 L45 33 C45 40 30 48 30 48 C30 48 15 40 15 33 L15 18 Z" fill="#E1EA2D"/>
                                <rect x="27" y="25" width="6" height="15" fill="#0DF"/>
                                <rect x="24" y="28" width="12" height="3" fill="#0DF"/>
                            </svg>
                        </div>
                        <div class="item-info">
                            <h3 class="item-name">Firewall Pro</h3>
                            <p class="item-description">Reduz erros em 25% e dá segunda chance</p>
                            <div class="item-effects">
                                <span class="effect-tag precision">-25% Erros</span>
                                <span class="effect-tag bonus">2ª Chance</span>
                            </div>
                            <div class="item-footer">
                                <span class="item-price">400 Pontos</span>
                                <button class="buy-btn" data-item="firewall-pro">Comprar</button>
                            </div>
                        </div>
                    </article>

                    <!-- Item 5: SSD Velocidade -->
                    <article class="shop-item" data-category="velocidade" data-price="350" data-id="ssd-velocidade">
                        <div class="item-icon">
                            <svg width="60" height="60" viewBox="0 0 60 60" fill="none">
                                <rect x="10" y="20" width="40" height="20" rx="2" fill="#0DF" opacity="0.8"/>
                                <rect x="15" y="25" width="30" height="10" rx="1" fill="#E1EA2D"/>
                                <circle cx="20" cy="30" r="2" fill="#0DF"/>
                                <circle cx="27" cy="30" r="2" fill="#0DF"/>
                                <circle cx="34" cy="30" r="2" fill="#0DF"/>
                                <circle cx="41" cy="30" r="2" fill="#0DF"/>
                                <path d="M25 10 L35 15 L35 20 L25 15 Z" fill="#FFD700"/>
                            </svg>
                        </div>
                        <div class="item-info">
                            <h3 class="item-name">SSD Velocidade</h3>
                            <p class="item-description">Carregamento 30% mais rápido</p>
                            <div class="item-effects">
                                <span class="effect-tag speed">+30% Velocidade</span>
                            </div>
                            <div class="item-footer">
                                <span class="item-price">350 Pontos</span>
                                <button class="buy-btn" data-item="ssd-velocidade">Comprar</button>
                            </div>
                        </div>
                    </article>

                    <!-- Item 6: Antivírus Ultimate -->
                    <article class="shop-item" data-category="especiais" data-price="800" data-id="antivirus-ultimate">
                        <div class="item-icon">
                            <svg width="60" height="60" viewBox="0 0 60 60" fill="none">
                                <circle cx="30" cy="30" r="25" fill="#E1EA2D" opacity="0.9"/>
                                <circle cx="30" cy="30" r="20" fill="#0DF" opacity="0.8"/>
                                <path d="M20 30 L27 37 L40 23" stroke="#E1EA2D" stroke-width="3" fill="none"/>
                                <circle cx="30" cy="15" r="3" fill="#FFD700"/>
                            </svg>
                        </div>
                        <div class="item-info">
                            <h3 class="item-name">Antivírus Ultimate</h3>
                            <p class="item-description">Proteção completa: +50% XP, -30% tempo, +3 tentativas</p>
                            <div class="item-effects">
                                <span class="effect-tag bonus">+50% XP</span>
                                <span class="effect-tag speed">-30% Tempo</span>
                                <span class="effect-tag precision">+3 Tentativas</span>
                            </div>
                            <div class="item-footer">
                                <span class="item-price">800 Pontos</span>
                                <button class="buy-btn" data-item="antivirus-ultimate">Comprar</button>
                            </div>
                        </div>
                    </article>

                    <!-- Item 7: Cabo Ethernet Premium -->
                    <article class="shop-item" data-category="bonus" data-price="250" data-id="cabo-ethernet">
                        <div class="item-icon">
                            <svg width="60" height="60" viewBox="0 0 60 60" fill="none">
                                <path d="M10 25 Q30 15 50 25 Q30 35 10 25" fill="#0DF" opacity="0.8"/>
                                <path d="M12 25 Q30 18 48 25 Q30 32 12 25" fill="#E1EA2D"/>
                                <rect x="5" y="22" width="8" height="6" rx="1" fill="#0DF"/>
                                <rect x="47" y="22" width="8" height="6" rx="1" fill="#0DF"/>
                            </svg>
                        </div>
                        <div class="item-info">
                            <h3 class="item-name">Cabo Ethernet Premium</h3>
                            <p class="item-description">Conexão estável: +10% pontos por combo</p>
                            <div class="item-effects">
                                <span class="effect-tag bonus">+10% Combo</span>
                            </div>
                            <div class="item-footer">
                                <span class="item-price">250 Pontos</span>
                                <button class="buy-btn" data-item="cabo-ethernet">Comprar</button>
                            </div>
                        </div>
                    </article>

                    <!-- Item 8: Cooler RGB -->
                    <article class="shop-item" data-category="especiais" data-price="500" data-id="cooler-rgb">
                        <div class="item-icon">
                            <svg width="60" height="60" viewBox="0 0 60 60" fill="none">
                                <circle cx="30" cy="30" r="20" fill="#0DF" opacity="0.3"/>
                                <circle cx="30" cy="30" r="15" fill="#E1EA2D" opacity="0.5"/>
                                <circle cx="30" cy="30" r="10" fill="#FF6B6B" opacity="0.5"/>
                                <circle cx="30" cy="30" r="5" fill="#4ECDC4"/>
                                <rect x="28" y="10" width="4" height="10" fill="#0DF"/>
                                <rect x="28" y="40" width="4" height="10" fill="#0DF"/>
                                <rect x="10" y="28" width="10" height="4" fill="#0DF"/>
                                <rect x="40" y="28" width="10" height="4" fill="#0DF"/>
                            </svg>
                        </div>
                        <div class="item-info">
                            <h3 class="item-name">Cooler RGB</h3>
                            <p class="item-description">Sistema nunca superaquece, mantém performance máxima</p>
                            <div class="item-effects">
                                <span class="effect-tag precision">Performance Max</span>
                                <span class="effect-tag bonus">Sem Lag</span>
                            </div>
                            <div class="item-footer">
                                <span class="item-price">500 Pontos</span>
                                <button class="buy-btn" data-item="cooler-rgb">Comprar</button>
                            </div>
                        </div>
                    </article>
                </div>
            </section>

            <!-- Seção de Equipamentos Ativos -->
            <section class="equipped-items">
                <h3>Equipamentos Ativos</h3>
                <div class="equipped-slots">
                    <div class="equipped-slot empty" id="slot-1">
                        <span class="slot-text">Vazio</span>
                    </div>
                    <div class="equipped-slot empty" id="slot-2">
                        <span class="slot-text">Vazio</span>
                    </div>
                    <div class="equipped-slot empty" id="slot-3">
                        <span class="slot-text">Vazio</span>
                    </div>
                </div>
            </section>
        </main>
    </section>

    <!-- JavaScript da Loja -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            <!-- Carregar dados salvos -->
            let pontos = parseInt(localStorage.getItem('gamePoints') || '2450');
            let equipedItems = JSON.parse(localStorage.getItem('equippedItems') || '[]');
            let purchasedItems = JSON.parse(localStorage.getItem('purchasedItems') || '[]');
            
            const maxEquipped = 3;

            // Atualizar display inicial
            updatePointsDisplay();
            updateEquippedItems();
            markPurchasedItems();

            // Filtros da loja
            const filterBtns = document.querySelectorAll('.filter-btn');
            const shopItems = document.querySelectorAll('.shop-item');

            filterBtns.forEach(btn => {
                btn.addEventListener('click', function() {
                    const category = this.dataset.category;
                    
                    // Atualizar botão ativo
                    filterBtns.forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    
                    // Filtrar itens
                    shopItems.forEach(item => {
                        if (category === 'todos' || item.dataset.category === category) {
                            item.style.display = 'block';
                            item.classList.add('fade-in');
                        } else {
                            item.style.display = 'none';
                        }
                    });
                });
            });

            // Comprar itens
            const buyBtns = document.querySelectorAll('.buy-btn');
            buyBtns.forEach(btn => {
                btn.addEventListener('click', function() {
                    const itemId = this.dataset.item;
                    const shopItem = this.closest('.shop-item');
                    const price = parseInt(shopItem.dataset.price);
                    const itemName = shopItem.querySelector('.item-name').textContent;
                    const itemDescription = shopItem.querySelector('.item-description').textContent;
                    const itemCategory = shopItem.dataset.category;

                    if (pontos >= price) {
                        if (equipedItems.length < maxEquipped) {
                            // Comprar item
                            pontos -= price;
                            const newItem = {
                                id: itemId, 
                                name: itemName, 
                                description: itemDescription,
                                category: itemCategory,
                                price: price
                            };
                            
                            equipedItems.push(newItem);
                            purchasedItems.push(itemId);
                            
                            // Salvar no localStorage
                            saveGameData();
                            
                            // Atualizar display
                            updatePointsDisplay();
                            updateEquippedItems();
                            
                            // Marcar como comprado
                            shopItem.classList.add('purchased');
                            this.textContent = 'Equipado';
                            this.disabled = true;
                            
                            showMessage(`${itemName} comprado e equipado!`, 'success');
                        } else {
                            showMessage('Máximo de 3 equipamentos ativos!', 'warning');
                        }
                    } else {
                        showMessage('Pontos insuficientes!', 'error');
                    }
                });
            });

            function updatePointsDisplay() {
                document.getElementById('pontos-display').textContent = `${pontos} Pontos`;
            }

            function updateEquippedItems() {
                const slots = document.querySelectorAll('.equipped-slot');
                
                slots.forEach((slot, index) => {
                    if (equipedItems[index]) {
                        slot.classList.remove('empty');
                        slot.classList.add('filled');
                        slot.innerHTML = `
                            <span class="equipped-name">${equipedItems[index].name}</span>
                            <button class="unequip-btn" data-index="${index}">✕</button>
                        `;
                    } else {
                        slot.classList.add('empty');
                        slot.classList.remove('filled');
                        slot.innerHTML = '<span class="slot-text">Vazio</span>';
                    }
                });

                // Event listeners para desequipar
                document.querySelectorAll('.unequip-btn').forEach(btn => {
                    btn.addEventListener('click', function() {
                        const index = parseInt(this.dataset.index);
                        const item = equipedItems[index];
                        
                        // Devolver pontos
                        pontos += item.price;
                        
                        // Remover do array
                        equipedItems.splice(index, 1);
                        purchasedItems = purchasedItems.filter(id => id !== item.id);
                        
                        // Salvar no localStorage
                        saveGameData();
                        
                        // Reativar botão na loja
                        const shopItem = document.querySelector(`[data-id="${item.id}"]`);
                        if (shopItem) {
                            shopItem.classList.remove('purchased');
                            const buyBtn = shopItem.querySelector('.buy-btn');
                            buyBtn.textContent = 'Comprar';
                            buyBtn.disabled = false;
                        }
                        
                        updatePointsDisplay();
                        updateEquippedItems();
                        showMessage(`${item.name} desequipado! Pontos devolvidos.`, 'info');
                    });
                });
            }

            function markPurchasedItems() {
                purchasedItems.forEach(itemId => {
                    const shopItem = document.querySelector(`[data-id="${itemId}"]`);
                    if (shopItem) {
                        shopItem.classList.add('purchased');
                        const buyBtn = shopItem.querySelector('.buy-btn');
                        buyBtn.textContent = 'Equipado';
                        buyBtn.disabled = true;
                    }
                });
            }

            function saveGameData() {
                localStorage.setItem('gamePoints', pontos.toString());
                localStorage.setItem('equippedItems', JSON.stringify(equipedItems));
                localStorage.setItem('purchasedItems', JSON.stringify(purchasedItems));
            }

            function showMessage(text, type) {
                const message = document.createElement('div');
                message.className = `message ${type}`;
                message.textContent = text;
                document.body.appendChild(message);
                
                setTimeout(() => {
                    message.remove();
                }, 3000);
            }

            // Animações de entrada
            shopItems.forEach((item, index) => {
                item.style.animationDelay = `${index * 0.1}s`;
            });

            // Botão voltar ao menu
            const voltarBtn = document.getElementById('voltar-menu-btn');
            if (voltarBtn) {
                voltarBtn.addEventListener('click', function(e) {
                    showMessage('Voltando ao menu principal...', 'info');
                });
            }
        });
    </script>
</body>

</html>
