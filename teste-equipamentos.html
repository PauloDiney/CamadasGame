<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teste de Equipamentos</title>
    <link rel="stylesheet" href="css/style.css">
    <style>
        body {
            padding: 2rem;
            background: #1a1a2e;
            color: white;
            font-family: Arial, sans-serif;
        }
        .test-section {
            background: rgba(255,255,255,0.1);
            padding: 1rem;
            margin: 1rem 0;
            border-radius: 8px;
        }
        .test-info {
            background: rgba(0,221,255,0.2);
            padding: 1rem;
            margin: 1rem 0;
            border-radius: 8px;
            border-left: 4px solid #0DF;
        }
        button {
            background: #0DF;
            color: #000;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 4px;
            cursor: pointer;
            margin: 0.5rem;
        }
        button:hover {
            background: #0cf;
        }
        #log-output {
            background: #000;
            padding: 1rem;
            border-radius: 4px;
            max-height: 400px;
            overflow-y: auto;
            font-family: monospace;
            font-size: 12px;
        }
        .log-line {
            margin: 2px 0;
            padding: 2px 4px;
        }
    </style>
</head>
<body>
    <h1>üß™ Teste de Sistema de Equipamentos</h1>
    
    <div class="test-info">
        <h3>üìç Informa√ß√µes da P√°gina</h3>
        <p><strong>URL:</strong> <span id="current-url"></span></p>
        <p><strong>Pathname:</strong> <span id="current-pathname"></span></p>
        <p><strong>√â Index?</strong> <span id="is-index"></span></p>
        <p><strong>√â Loja?</strong> <span id="is-loja"></span></p>
    </div>

    <div class="test-section">
        <h3>üéÆ A√ß√µes de Teste</h3>
        <button onclick="testarDeteccaoPagina()">üîç Testar Detec√ß√£o de P√°gina</button>
        <button onclick="adicionarEquipamentoTeste()">‚ûï Adicionar Equipamento Teste</button>
        <button onclick="removerTodosEquipamentos()">üóëÔ∏è Remover Todos</button>
        <button onclick="atualizarEquipamentos()">üîÑ Atualizar Display</button>
        <button onclick="limparLog()">üßπ Limpar Log</button>
    </div>

    <div class="test-section">
        <h3>üì¶ Container de Equipamentos</h3>
        <div class="content_habilidades">
            <div class="equipamentos" id="equipamentos-container">
                <div class="no-equipment">
                    <p>Nenhum equipamento ativo</p>
                </div>
            </div>
        </div>
    </div>

    <div class="test-section">
        <h3>üìã Console Log</h3>
        <div id="log-output"></div>
    </div>

    <script src="js/path-utils.js"></script>
    <script src="js/global.js"></script>
    
    <script>
        // Sobrescreve console.log para mostrar no HTML
        const originalLog = console.log;
        const logOutput = document.getElementById('log-output');
        
        console.log = function(...args) {
            originalLog.apply(console, args);
            const logLine = document.createElement('div');
            logLine.className = 'log-line';
            logLine.textContent = args.map(arg => 
                typeof arg === 'object' ? JSON.stringify(arg, null, 2) : String(arg)
            ).join(' ');
            logOutput.appendChild(logLine);
            logOutput.scrollTop = logOutput.scrollHeight;
        };

        function atualizarInfoPagina() {
            document.getElementById('current-url').textContent = window.location.href;
            document.getElementById('current-pathname').textContent = window.location.pathname;
            document.getElementById('is-index').textContent = isPaginaAtual('index') ? '‚úÖ SIM' : '‚ùå N√ÉO';
            document.getElementById('is-loja').textContent = isPaginaAtual('loja') ? '‚úÖ SIM' : '‚ùå N√ÉO';
        }

        function testarDeteccaoPagina() {
            console.log('=== TESTE DE DETEC√á√ÉO DE P√ÅGINA ===');
            console.log('URL completa:', window.location.href);
            console.log('Pathname:', window.location.pathname);
            console.log('isPaginaAtual("index"):', isPaginaAtual('index'));
            console.log('isPaginaAtual("loja"):', isPaginaAtual('loja'));
            console.log('isPaginaAtual("teste-equipamentos"):', isPaginaAtual('teste-equipamentos'));
            atualizarInfoPagina();
        }

        function adicionarEquipamentoTeste() {
            const equipamento = {
                id: 'teste-' + Date.now(),
                name: 'Equipamento de Teste',
                description: 'Este √© um equipamento de teste',
                price: 1000,
                category: 'teste'
            };
            
            let equippedItems = JSON.parse(localStorage.getItem('equippedItems') || '[]');
            equippedItems.push(equipamento);
            localStorage.setItem('equippedItems', JSON.stringify(equippedItems));
            
            console.log('‚úÖ Equipamento adicionado:', equipamento);
            console.log('üì¶ Total de equipamentos:', equippedItems.length);
            
            sincronizarGlobais();
        }

        function removerTodosEquipamentos() {
            localStorage.setItem('equippedItems', '[]');
            console.log('üóëÔ∏è Todos os equipamentos removidos');
            sincronizarGlobais();
        }

        function limparLog() {
            logOutput.innerHTML = '';
            console.log('Log limpo!');
        }

        // Inicializa√ß√£o
        window.addEventListener('DOMContentLoaded', function() {
            console.log('üöÄ P√°gina de teste carregada!');
            atualizarInfoPagina();
            testarDeteccaoPagina();
        });
    </script>
</body>
</html>
